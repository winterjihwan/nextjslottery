"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{96600:function(e,t,r){r.r(t),r.d(t,{WalletConnectV1Adapter:function(){return ez}});var n=r(4942),i=r(71516),a=r(95844),o=r(13631),s=r(20917),c=r(96245),u=r(2043),d=r.n(u);let f={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},l={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},h=e=>{if(e===f.EIP155||e===f.SOLANA)return 1;throw Error(`Chain namespace ${e} is not supported`)},p=e=>{let t=f.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},g=e=>{let t=f.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},m=(e,t)=>{if(e===f.OTHER)return null;let r=t?"number"==typeof t?t:parseInt(t,16):h(e);return e===f.EIP155?p(r):e===f.SOLANA?g(r):null};class y extends o.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class v extends y{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new v(e,`${v.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5013,e)}}(0,n.Z)(v,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class w extends y{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new w(e,`${w.messages[e]}${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return w.fromCode(5114,e)}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,n.Z)(w,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});let b={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},C=E({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},b),O=E({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},b),x=E(E({},O),C);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let T={EXTERNAL:"external",IN_APP:"in_app"},A={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},S=_(_({},A),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class k extends a.Ue{constructor(){super(...arguments),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"chainConfig",null)}get chainConfigProxy(){return this.chainConfig?_({},this.chainConfig):null}setChainConfig(e){if(this.status===A.READY)return;if(!e.chainNamespace)throw v.notReady("ChainNamespace is required while setting chainConfig");let t=m(e.chainNamespace,e.chainId);this.chainConfig=_(_({},t),e)}setAdapterSettings(e){}checkConnectionRequirements(){if(this.name!==x.WALLET_CONNECT_V1||this.status!==A.CONNECTING){if(this.status===A.CONNECTING)throw v.notReady("Already connecting");if(this.status===A.CONNECTED)throw w.connectionError("Already connected");if(this.status!==A.READY)throw w.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw w.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}checkInitializationRequirements(){if(this.status!==A.NOT_READY){if(this.status===A.CONNECTED)throw v.notReady("Already connected");if(this.status===A.READY)throw v.notReady("Adapter is already initialized")}}updateAdapterData(e){this.adapterData=e,this.emit(S.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}let I="https://authjs.web3auth.io";var j=d().getLogger("web3auth-logger");function B(e){let t=!1,r=0,n;try{n=window[e],t=!0,r=n.length;let i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(a){return!!(a&&(22===a.code||1014===a.code||"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&t&&0!==r)}}let R=e=>("string"==typeof e||"number"==typeof e)&&/^(-)?0x[0-9a-f]*$/i.test(e),D=e=>{let t=(0,c.Z)(e);return!!(!t.exp||t.exp<Math.floor(Date.now()/1e3))},L=async(e,t)=>{let r=await (0,s.v_)(`${I}/siww/get`,{payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"});if(!r.success)throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return r.challenge},M=async(e,t,r,n,i,a)=>{let o={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:window.location.hostname,timeout:i},c=await (0,s.v_)(`${I}/siww/verify`,o,{headers:{client_id:a,wallet_provider:n}});if(!c.success)throw j.error("Failed to authenticate user, ,message verification failed",c.error),Error("Failed to authenticate user, ,message verification failed");return c.token},H=(e,t)=>B("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,G=(e,t,r)=>B("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,r):null,F=(e,t)=>B("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;class K extends k{constructor(e){super(),(0,n.Z)(this,"clientId",void 0),this.clientId=e.clientId}async authenticateUser(){var e;if(!this.provider||!(null!==(e=this.chainConfig)&&void 0!==e&&e.chainId))throw w.notConnectedError();let{chainNamespace:t,chainId:r}=this.chainConfig;if(this.status!==A.CONNECTED)throw w.notConnectedError("Not connected with wallet, Please login/connect first");let n=await this.provider.request({method:"eth_accounts"});if(n&&n.length>0){let i=H(n[0],this.name);if(i){let a=D(i);if(!a)return{idToken:i}}let o={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await L(o,t),c=await this.provider.request({method:"personal_sign",params:[s,n[0]]}),u=await M(t,c,s,this.name,this.sessionTime,this.clientId);return G(n[0],this.name,u),{idToken:u}}throw w.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==A.CONNECTED)throw w.disconnectionError("Not connected with wallet");let e=await this.provider.request({method:"eth_accounts"});e&&e.length>0&&F(e[0],this.name)}}var U=r(22782),Z=r(79826),q=r(23420),V=r.n(q);function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class $ extends U.xG{constructor(e){let{config:t,state:r}=e;if(super({config:t,state:r}),(0,n.Z)(this,"_providerEngineProxy",null),!t.chainConfig)throw v.invalidProviderConfigError("Please provide chainConfig");if(!t.chainConfig.chainId)throw v.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!t.chainConfig.rpcTarget)throw v.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:t.chainConfig,networks:{[t.chainConfig.chainId]:t.chainConfig}},super.initialize()}get provider(){return this._providerEngineProxy}set provider(e){throw Error("Method not implemented.")}addChain(e){if(!e.chainId||!e.rpcTarget)throw Z.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:z(z({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;let r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw Z.ethErrors.rpc.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,U.qY)(e)}}class Y{constructor(){(0,n.Z)(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw Error("Method not implemented.")}addChain(e){throw Error("Method not implemented.")}async setupProvider(e){let t=this.getPrivKeyMiddleware(e),r=new a.eI;r.push(t);let n=(0,U.Xj)(r);this.updateProviderEngineProxy(n)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,U.qY)(e)}getPrivKeyMiddleware(e){return this.createPrivKeyMiddleware({getPrivatekey:async()=>e})}createPrivKeyMiddleware(e){let{getPrivatekey:t}=e;async function r(e,r){r.result=await t()}return(0,a.v0)({private_key:(0,a.Pk)(r)})}}(0,n.Z)(Y,"getProviderInstance",async e=>{let t=new Y;return await t.setupProvider(e.privKey),t}),V()();var J=r(66052),X=r(51091),Q=r(62671),ee=r(69282),et=r.n(ee),er=r(40660),en=r(70794),ei=r(2832),ea=r.n(ei),eo=r(48764).Buffer;function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eu(e){return 42===e.length}function ed(e){let{getAccounts:t,getPrivateKey:r,processTransaction:n,processSignTransaction:i,processEthSignMessage:o,processTypedMessage:s,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:d,processEncryptionPublicKey:f,processDecryptMessage:l}=e,h=(0,a.UZ)([(0,a.v0)({eth_syncing:!1}),function(e){let{getAccounts:t,getPrivateKey:r,processDecryptMessage:n,processEncryptionPublicKey:i,processEthSignMessage:o,processPersonalMessage:s,processTransaction:c,processSignTransaction:u,processTypedMessage:d,processTypedMessageV3:f,processTypedMessageV4:l}=e;if(!t)throw Error("opts.getAccounts is required");async function h(e,r){if("string"==typeof e&&e.length>0){let n=await t(r),i=n.map(e=>e.toLowerCase()),a=e.toLowerCase();if(i.includes(a))return a}throw Z.ethErrors.rpc.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function p(e,r){r.result=await t(e)}async function g(e,r){let n=await t(e);r.result=n[0]||null}async function m(e,t){if(!c)throw Z.ethErrors.rpc.methodNotSupported();let r=e.params[0]||{from:""};r.from=await h(r.from,e),t.result=await c(r,e)}async function y(e,t){if(!u)throw Z.ethErrors.rpc.methodNotSupported();let r=e.params[0]||{from:""};r.from=await h(r.from,e),t.result=await u(r,e)}async function v(e,t){if(!o)throw Z.ethErrors.rpc.methodNotSupported();let r=await h(e.params[0],e),n=e.params[1],i=e.params[2]||{},a=ec(ec({},i),{},{from:r,data:n});t.result=await o(a,e)}async function w(e,t){if(!d)throw Z.ethErrors.rpc.methodNotSupported();let r=e.params[0],n=await h(e.params[1],e),i=e.params[2]||{},a=ec(ec({},i),{},{from:n,data:r});t.result=await d(a,e,"V1")}async function P(e,t){if(!f)throw Z.ethErrors.rpc.methodNotSupported();let r=await h(e.params[0],e),n=e.params[1];t.result=await f({data:n,from:r,version:"V3"},e,"V3")}async function E(e,t){if(!l)throw Z.ethErrors.rpc.methodNotSupported();let r=await h(e.params[0],e),n=e.params[1];t.result=await l({data:n,from:r,version:"V4"},e,"V4")}async function b(e,t){if(!s)throw Z.ethErrors.rpc.methodNotSupported();let r=e.params[0],n=e.params[1],i=e.params[2]||{},a,o;if(eu(r)&&!eu(n)){let c="The eth_personalSign method requires params ordered ";c+="[message, address]. This was previously handled incorrectly, ",c+="and has been corrected automatically. ",c+="Please switch this param order for smooth behavior in the future.",t.warning=c,a=r,o=n}else o=r,a=n;a=await h(a,e);let u=ec(ec({},i),{},{from:a,data:o});t.result=await s(u,e)}async function C(e,t){if(!i)throw Z.ethErrors.rpc.methodNotSupported();let r=await h(e.params[0],e);t.result=await i(r,e)}async function O(e,t){if(!n)throw Z.ethErrors.rpc.methodNotSupported();let r=e.params[0],i=await h(e.params[1],e),a=e.params[2]||{},o=ec(ec({},a),{},{from:i,data:r});t.result=n(o,e)}async function x(e,t){if(!r)throw Z.ethErrors.rpc.methodNotSupported();t.result=r(e)}return(0,a.v0)({eth_accounts:(0,a.Pk)(p),eth_private_key:(0,a.Pk)(x),eth_coinbase:(0,a.Pk)(g),eth_sendTransaction:(0,a.Pk)(m),eth_signTransaction:(0,a.Pk)(y),eth_sign:(0,a.Pk)(v),eth_signTypedData:(0,a.Pk)(w),eth_signTypedData_v3:(0,a.Pk)(P),eth_signTypedData_v4:(0,a.Pk)(E),personal_sign:(0,a.Pk)(b),eth_getEncryptionPublicKey:(0,a.Pk)(C),eth_decrypt:(0,a.Pk)(O)})}({getAccounts:t,getPrivateKey:r,processTransaction:n,processEthSignMessage:o,processSignTransaction:i,processTypedMessage:s,processTypedMessageV3:c,processTypedMessageV4:u,processPersonalMessage:d,processEncryptionPublicKey:f,processDecryptMessage:l})]);return h}function ef(e){var t,r;let{chainId:n,rpcTarget:i}=e,o=(0,U.v$)({rpcTarget:i}),s=(0,a.UZ)([(e,t,r,i)=>"eth_chainId"===e.method?(t.result=n,i()):r(),(t,r,n,i)=>"eth_provider_config"===t.method?(r.result=e,i()):n(),o]);return{networkMiddleware:s,fetchMiddleware:o}}function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class ep extends ${constructor(e){let{config:t,state:r,connector:i}=e;super({config:{chainConfig:eh(eh({},t.chainConfig),{},{chainNamespace:f.EIP155}),skipLookupNetwork:!!t.skipLookupNetwork},state:eh(eh({},r||{}),{},{chainId:"loading",accounts:[]})}),(0,n.Z)(this,"connector",null),this.connector=i||null}async enable(){if(!this.connector)throw Z.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});return await this.setupProvider(this.connector),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){this.onConnectorStateUpdate(e),await this.setupEngine(e)}async switchChain(e){let{chainId:t,addChain:r=!0,lookup:n=!0}=e;if(!this.connector)throw Z.ethErrors.provider.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});let i=this.getChainConfig(t);this.update({chainId:"loading"});let{rpcTarget:a,displayName:o}=i;if(r)try{await this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:t,chainName:o,rpcUrls:[a]}]})}catch(s){j.error(s)}try{await this.connector.sendCustomRequest({method:"wallet_switchEthereumChain",params:[{chainId:t}]})}catch(c){if(j.error(c),"JSON RPC response format is invalid"!==c.message)throw c}this.configure({chainConfig:i}),n&&await this.lookupNetwork(this.connector)}async addChain(e){if(!this.connector)throw v.notReady("Wallet adapter is not ready yet");let{rpcTarget:t,displayName:r}=e;try{await this.connector.sendCustomRequest({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:r,rpcUrls:[t]}]}),super.addChain(e)}catch(n){throw j.error(n),n}}async lookupNetwork(e){if(!e.connected)throw w.notConnectedError("Wallet connect connector is not connected");if(!this.provider)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let{chainId:t}=this.config.chainConfig,r=R(e.chainId.toString())?e.chainId:`0x${e.chainId.toString(16)}`;if(t!==r)throw v.rpcConnectionError(`Invalid network, net_version is: ${r}, expected: ${t}`);return this.provider.emit("connect",{chainId:t}),this.provider.emit("chainChanged",this.state.chainId),r}async setupEngine(e){let t=function(e){let{connector:t}=e;return{async getPrivateKey(){throw Z.ethErrors.rpc.methodNotSupported()},async getAccounts(e){let{accounts:r}=t;if(r&&r.length)return r;throw Error("Failed to get accounts")},async processTransaction(e,r){let n=await t.sendTransaction(e);return n},async processSignTransaction(e,r){let n=await t.signTransaction(e);return n},async processEthSignMessage(e,r){let n=await t.signMessage([e.from,e.data]);return n},async processPersonalMessage(e,r){let n=await t.signPersonalMessage([e.data,e.from]);return n},async processTypedMessage(e,r){let n=await t.signTypedData([e.from,e.data]);return n},async processTypedMessageV3(e){let r=await t.signTypedData([e.from,e.data]);return r},async processTypedMessageV4(e){let r=await t.signTypedData([e.from,e.data]);return r},async processEncryptionPublicKey(e){throw Z.ethErrors.rpc.methodNotSupported()},processDecryptMessage(e){throw Z.ethErrors.rpc.methodNotSupported()}}}({connector:e});this.update({accounts:e.accounts||[]});let r=ed(t),n=new a.eI,{networkMiddleware:i}=ef(this.config.chainConfig);n.push(r),n.push(i);let o=(0,U.Xj)(n);this.updateProviderEngineProxy(o),this.config.skipLookupNetwork||await this.lookupNetwork(e)}async onConnectorStateUpdate(e){e.on("session_update",async(t,r)=>{if(!this.provider)throw w.notConnectedError("Wallet connect connector is not connected");if(t){this.provider.emit("error",t);return}let{accounts:n,chainId:i,rpcUrl:a}=r.params[0];null!=n&&n.length&&this.state.accounts[0]!==n[0]&&(this.update({accounts:n}),this.provider.emit("accountsChanged",n));let o=`0x${i.toString(16)}`;if(i&&this.state.chainId!==o){let s=m(f.EIP155,i)||{};this.configure({chainConfig:eh(eh({},s),{},{chainId:o,rpcTarget:a,chainNamespace:f.EIP155})}),await this.setupEngine(e)}})}}(0,n.Z)(ep,"getProviderInstance",async e=>{let t=new ep({config:{chainConfig:e.chainConfig,skipLookupNetwork:e.skipLookupNetwork}});return await t.setupProvider(e.connector),t});let eg=new en.Z("1e18"),em=new en.Z("1e9"),ey=new en.Z("1"),ev={hex:e=>"string"==typeof e?new en.Z((0,Q.stripHexPrefix)(e),16):new en.Z(e,16),dec:e=>new en.Z(e,10)},ew={WEI:e=>e.div(eg),GWEI:e=>e.div(em),ETH:e=>e.div(ey)},eP={WEI:e=>e.times(eg).dp(0,en.Z.ROUND_HALF_UP),GWEI:e=>e.times(em).dp(9,en.Z.ROUND_HALF_UP),ETH:e=>e.times(ey).dp(9,en.Z.ROUND_HALF_UP)},eE={hex:e=>e.toString(16),dec:e=>new en.Z(e).toString(10)},eb=e=>{let{value:t,fromNumericBase:r,fromDenomination:n,toNumericBase:i,toDenomination:a,numberOfDecimals:o}=e,s=ev[r](t);return n&&(s=ew[n](s)),a&&(s=eP[a](s)),o&&(s=s.dp(o,en.Z.ROUND_HALF_DOWN)),i&&(s=eE[i](s)),s},eC=(e,t)=>{let{fromNumericBase:r="hex",toNumericBase:n,fromDenomination:i,toDenomination:a,numberOfDecimals:o}=t;return eb({fromNumericBase:r,toNumericBase:n,fromDenomination:i,toDenomination:a,numberOfDecimals:o,value:e||"0"})};function eO(e){return eC(e,{fromNumericBase:"dec",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI"})}function ex(e){return eC(e,{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"WEI",toDenomination:"GWEI"})}function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eT(e){let t=eO(e),r=ex(t);return r}async function eA(e){let t=await (0,s.U2)(e),r=e_(e_({},t),{},{estimatedBaseFee:eT(t.estimatedBaseFee),low:e_(e_({},t.low),{},{suggestedMaxPriorityFeePerGas:eT(t.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eT(t.low.suggestedMaxFeePerGas)}),medium:e_(e_({},t.medium),{},{suggestedMaxPriorityFeePerGas:eT(t.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eT(t.medium.suggestedMaxFeePerGas)}),high:e_(e_({},t.high),{},{suggestedMaxPriorityFeePerGas:eT(t.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:eT(t.high.suggestedMaxFeePerGas)})});return r}async function eS(e){let t=await (0,s.U2)(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors"});return{low:t.SafeGasPrice,medium:t.ProposeGasPrice,high:t.FastGasPrice}}let ek=(e,t)=>{var r;try{et().ok(e&&"object"==typeof e,"Params must be an object."),et().ok("data"in e,'Params must include a "data" field.'),et().ok("from"in e,'Params must include a "from" field.'),et().ok("string"==typeof e.from&&(0,Q.isValidAddress)(e.from),'"from" field must be a valid, lowercase, hexadecimal Ethereum address string.');let n=null,i=null;switch(e.version){case X.SignTypedDataVersion.V1:"string"==typeof e.data?et().doesNotThrow(()=>{n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,et().ok(Array.isArray(n),"params.data must be an array."),et().doesNotThrow(()=>{(0,X.typedSignatureHash)(n)},"Signing data must be valid EIP-712 typed data.");break;case X.SignTypedDataVersion.V3:case X.SignTypedDataVersion.V4:"string"==typeof e.data?et().doesNotThrow(()=>{n=JSON.parse(e.data)},'"data" must be a valid JSON string.'):n=e.data,et().ok(n.primaryType in n.types,`Primary type of "${n.primaryType}" has no type definition.`);let a=er.validate(n,X.TYPED_MESSAGE_SCHEMA.properties);et().strictEqual(a.errors.length,0,"Signing data must conform to EIP-712 schema. See https://git.io/fNtcx."),(i=null===(r=n.domain)||void 0===r?void 0:r.chainId)&&(et().ok(!Number.isNaN(t),`Cannot sign messages for chainId "${i}", because Web3Auth is switching networks.`),"string"==typeof i&&(i=Number.parseInt(i,R(i)?16:10)),et().strictEqual(i,t,`Provided chainId "${i}" must match the active chainId "${t}"`));break;default:et().fail(`Unknown typed data version "${e.version}"`)}}catch(o){throw Z.ethErrors.rpc.invalidInput({message:null==o?void 0:o.message})}};function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}async function eB(e,t,r){let n=await r.formatTransaction(e),i=await r.getCommonConfiguration(),a=J.TransactionFactory.fromTxData(n,{common:i}),o=a.sign(eo.from(t,"hex")).serialize();return o}function eR(e){return(0,Q.addHexPrefix)(e.toString(16))}function eD(e){return Q.BN.isBN(e)?e:new Q.BN((0,Q.stripHexPrefix)(e),16)}let eL={LEGACY:"0x0",ACCESS_LIST:"0x1",FEE_MARKET:"0x2"},eM={SENT_ETHER:"sentEther",CONTRACT_INTERACTION:"contractInteraction",DEPLOY_CONTRACT:"contractDeployment",STANDARD_TRANSACTION:"transaction"},eH={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class eK{constructor(e){let{getProviderEngineProxy:t}=e;(0,n.Z)(this,"chainConfig",null),(0,n.Z)(this,"getProviderEngineProxy",void 0),(0,n.Z)(this,"isEIP1559Compatible",!1),this.getProviderEngineProxy=t}get providerProxy(){return this.getProviderEngineProxy()}async init(){this.chainConfig=await this.providerProxy.request({method:"eth_provider_config",params:[]}),this.isEIP1559Compatible=await this.getEIP1559Compatibility()}async getCommonConfiguration(){if(!this.chainConfig)throw Error("Chain config not initialized");let{displayName:e,chainId:t}=this.chainConfig,r=this.isEIP1559Compatible?ei.Hardfork.London:ei.Hardfork.Berlin,n={name:e,chainId:"loading"===t?0:Number.parseInt(t,16),networkId:"loading"===t?0:Number.parseInt(t,16),defaultHardfork:r};return ea().custom(n)}async formatTransaction(e){if(!this.chainConfig)throw Error("Chain config not initialized");let t=eF({},e);if(void 0===t.nonce&&(t.nonce=await this.providerProxy.request({method:"eth_getTransactionCount",params:[e.from,"latest"]})),!this.isEIP1559Compatible&&t.gasPrice){if(t.maxFeePerGas&&delete t.maxFeePerGas,t.maxPriorityFeePerGas&&delete t.maxPriorityFeePerGas,t.gas)t.gasLimit=t.gas;else{let r=await this.getDefaultGasLimit(t);r&&(t.gasLimit=r)}return t}if(t.gas)t.gasLimit=t.gas;else{let n=await this.getDefaultGasLimit(t);n&&(t.gasLimit=n)}let{gasPrice:i,maxFeePerGas:a,maxPriorityFeePerGas:o}=await this.getDefaultGasFees(t);if(this.isEIP1559Compatible){if(!t.gasPrice||t.maxFeePerGas||t.maxPriorityFeePerGas)a&&!t.maxFeePerGas&&(t.maxFeePerGas=a),o&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=o),i&&!t.maxFeePerGas&&(t.maxFeePerGas=i),t.maxFeePerGas&&!t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=t.maxFeePerGas);else{var s,c;t.maxFeePerGas=t.gasPrice,s="string"==typeof o?(0,Q.stripHexPrefix)(o):o,c="string"==typeof t.gasPrice?(0,Q.stripHexPrefix)(t.gasPrice):t.gasPrice,t.maxPriorityFeePerGas=(null==s||null==c?null:new en.O(s,10).lt(c,10))?o:t.gasPrice}delete t.gasPrice}else delete t.maxPriorityFeePerGas,delete t.maxFeePerGas;return!i||t.gasPrice||t.maxPriorityFeePerGas||t.maxFeePerGas||(t.gasPrice=i),t.type=this.isEIP1559Compatible?eL.FEE_MARKET:eL.LEGACY,t.chainId=this.chainConfig.chainId,t}async fetchEthGasPriceEstimate(){let e=await this.providerProxy.request({method:"eth_gasPrice",params:[]});return{gasPrice:ex(e).toString()}}async getEIP1559Compatibility(){let e=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]}),t=e&&void 0!==e.baseFeePerGas;return!!t}async fetchGasFeeEstimateData(){if(!this.chainConfig)throw Error("Chain config not initialized");let e="0x1"===this.chainConfig.chainId,t=Number.parseInt(this.chainConfig.chainId,16),r;try{if(this.isEIP1559Compatible){let n=await eA("https://gas-api.metaswap.codefi.network/networks/<chain_id>/suggestedGasFees".replace("<chain_id>",`${t}`));r={gasFeeEstimates:n,gasEstimateType:eH.FEE_MARKET}}else if(e){let i=await eS("https://gas-api.metaswap.codefi.network/networks/<chain_id>/gasPrices".replace("<chain_id>",`${t}`));r={gasFeeEstimates:i,gasEstimateType:eH.LEGACY}}else throw Error("Main gas fee/price estimation failed. Use fallback")}catch(s){try{let a=await this.fetchEthGasPriceEstimate();r={gasFeeEstimates:a,gasEstimateType:eH.ETH_GASPRICE}}catch(o){throw Error(`Gas fee/price estimation failed. Message: ${o.message}`)}}return r}async getDefaultGasFees(e){if(!this.isEIP1559Compatible&&e.gasPrice||this.isEIP1559Compatible&&e.maxFeePerGas&&e.maxPriorityFeePerGas)return{};try{let{gasFeeEstimates:t,gasEstimateType:r}=await this.fetchGasFeeEstimateData();if(this.isEIP1559Compatible&&r===eH.FEE_MARKET){let{medium:{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:i}={}}=t;if(n&&i)return{maxFeePerGas:(0,Q.addHexPrefix)(eO(i)),maxPriorityFeePerGas:(0,Q.addHexPrefix)(eO(n))}}else if(r===eH.LEGACY)return{gasPrice:(0,Q.addHexPrefix)(eO(t.medium))};else if(r===eH.ETH_GASPRICE)return{gasPrice:(0,Q.addHexPrefix)(eO(t.gasPrice))}}catch(a){j.error(a)}let{gasPrice:o}=await this.fetchEthGasPriceEstimate();return{gasPrice:(0,Q.addHexPrefix)(eO(o))}}async estimateTxGas(e){let t=eF({},e);delete t.gasPrice,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas;let r=await this.providerProxy.request({method:"eth_estimateGas",params:[t]});return r}async analyzeGasUsage(e){let t=await this.providerProxy.request({method:"eth_getBlockByNumber",params:["latest",!1]}),r=eD(t.gasLimit),n=function(e,t,r){let n=new Q.BN(19),i=new Q.BN(20);return e.mul(n).div(i)}(r,19,20),i=eR(n);try{i=await this.estimateTxGas(e)}catch(a){j.warn(a)}return{blockGasLimit:t.gasLimit,estimatedGasHex:i}}addGasBuffer(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.5,n=eD(e),i=eD(t),a=i.muln(.9),o=n.muln(r);return n.gt(a)?eR(n):o.lt(a)?eR(o):eR(a)}async determineTransactionCategory(e){let{data:t,to:r}=e,n="",i;if(t&&!r)i=eM.DEPLOY_CONTRACT;else{try{n=await this.providerProxy.request({method:"eth_getCode",params:[r,"latest"]})}catch(a){j.warn(a)}let o=!n||"0x"===n||"0x0"===n;i=o?eM.SENT_ETHER:eM.CONTRACT_INTERACTION}return{transactionCategory:i,code:n}}async getDefaultGasLimit(e){let{transactionCategory:t}=await this.determineTransactionCategory(eF({},e));if(e.gas)return e.gas;if(e.to&&t===eM.SENT_ETHER){if(e.data)throw Error("TxGasUtil - Trying to call a function on a non-contract address");return(0,Q.addHexPrefix)(21e3.toString(16))}let{blockGasLimit:r,estimatedGasHex:n}=await this.analyzeGasUsage(e),i=this.addGasBuffer((0,Q.addHexPrefix)(n),r);return i}}function eU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eU(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class eq extends ${constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:eZ(eZ({},t.chainConfig),{},{chainNamespace:f.EIP155})},state:r})}async enable(){if(!this.state.privateKey)throw Z.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){let t=new eK({getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=function(e){let{txFormatter:t,privKey:r,getProviderEngineProxy:n}=e;return{getAccounts:async e=>[`0x${(0,Q.privateToAddress)(eo.from(r,"hex")).toString("hex")}`],getPrivateKey:async e=>r,async processTransaction(e,i){let a=n();if(!a)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=await eB(e,r,t),s=await a.request({method:"eth_sendRawTransaction",params:["0x".concat(o.toString("hex"))]});return s},async processSignTransaction(e,i){let a=n();if(!a)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=await eB(e,r,t);return`0x${o.toString("hex")}`},async processEthSignMessage(e,t){let n=(0,U.l)(r,e.data);return n},async processPersonalMessage(e,t){let n=eo.from(r,"hex"),i=(0,X.personalSign)({privateKey:n,data:e.data});return i},async processTypedMessage(e,t){j.debug("processTypedMessage",e);let i=eo.from(r,"hex"),a=n();if(!a)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=await a.request({method:"eth_chainId"}),s=Number.parseInt(o,R(o)?16:10),c=ej(ej({},e),{},{version:X.SignTypedDataVersion.V1});ek(c,s);let u="string"==typeof c.data?JSON.parse(c.data):c.data,d=(0,X.signTypedData)({privateKey:i,data:u,version:X.SignTypedDataVersion.V1});return d},async processTypedMessageV3(e,t){j.debug("processTypedMessageV3",e);let i=eo.from(r,"hex"),a=n();if(!a)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=await a.request({method:"eth_chainId"}),s=Number.parseInt(o,R(o)?16:10);ek(e,s);let c="string"==typeof e.data?JSON.parse(e.data):e.data,u=(0,X.signTypedData)({privateKey:i,data:c,version:X.SignTypedDataVersion.V3});return u},async processTypedMessageV4(e,t){j.debug("processTypedMessageV4",e);let i=eo.from(r,"hex"),a=n();if(!a)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=await a.request({method:"eth_chainId"}),s=Number.parseInt(o,R(o)?16:10);ek(e,s);let c="string"==typeof e.data?JSON.parse(e.data):e.data,u=(0,X.signTypedData)({privateKey:i,data:c,version:X.SignTypedDataVersion.V4});return u},processEncryptionPublicKey:async(e,t)=>(j.info("processEncryptionPublicKey",e),(0,X.getEncryptionPublicKey)(r)),processDecryptMessage(e,t){j.info("processDecryptMessage",e);let n=(0,Q.stripHexPrefix)(e.data),i=eo.from(n,"hex"),a=(0,X.decrypt)({encryptedData:JSON.parse(i.toString("utf8")),privateKey:r});return a}}}({txFormatter:t,privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),n=ed(r),i=this.getChainSwitchMiddleware(),o=new a.eI,{networkMiddleware:s}=ef(this.config.chainConfig);o.push(n),o.push(i),o.push(this.getAccountMiddleware()),o.push(s);let c=(0,U.Xj)(o);this.updateProviderEngineProxy(c),await t.init(),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let t=await this._providerEngineProxy.request({method:"eth_private_key"});t!==e.privateKey&&(await this.setupProvider(e.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"eth_accounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});let r=await this._providerEngineProxy.request({method:"eth_private_key"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let{chainId:e}=this.config.chainConfig;if(!e)throw Z.ethErrors.rpc.invalidParams("chainId is required while lookupNetwork");let t=await this._providerEngineProxy.request({method:"net_version",params:[]});if(parseInt(e,16)!==parseInt(t,10))throw Z.ethErrors.provider.chainDisconnected(`Invalid network, net_version is: ${t}`);return this.state.chainId!==e&&(this._providerEngineProxy.emit("chainChanged",e),this._providerEngineProxy.emit("connect",{chainId:e})),this.update({chainId:e}),t}getChainSwitchMiddleware(){let e=function(e){let{addChain:t,switchChain:r}=e;async function n(e,r){var n;let i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(!i)throw Z.ethErrors.rpc.invalidParams("Missing chain params");if(!i.chainId)throw Z.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!i.rpcUrls||0===i.rpcUrls.length)throw Z.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!i.nativeCurrency)throw Z.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");r.result=await t(i)}async function i(e,t){var n;let i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(!i)throw Z.ethErrors.rpc.invalidParams("Missing chainId");t.result=await r(i)}return(0,a.v0)({wallet_addEthereumChain:(0,a.Pk)(n),wallet_switchEthereumChain:(0,a.Pk)(i)})}({addChain:async e=>{let{chainId:t,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:a}=e;this.addChain({chainNamespace:"eip155",chainId:t,ticker:(null==a?void 0:a.symbol)||"ETH",tickerName:(null==a?void 0:a.name)||"Ether",displayName:r,rpcTarget:n[0],blockExplorer:(null==i?void 0:i[0])||""})},switchChain:async e=>{let{chainId:t}=e;await this.switchChain({chainId:t})}});return e}getAccountMiddleware(){return function(e){let{updatePrivatekey:t}=e;async function r(e,r){var n;let i=null!==(n=e.params)&&void 0!==n&&n.length?e.params[0]:void 0;if(!(null!=i&&i.privateKey))throw Z.ethErrors.rpc.invalidParams("Missing privateKey");r.result=await t(i)}return(0,a.v0)({wallet_updateAccount:(0,a.Pk)(r)})}({updatePrivatekey:async e=>{let{privateKey:t}=e;await this.updateAccount({privateKey:t})}})}}(0,n.Z)(eq,"getProviderInstance",async e=>{let t=new eq({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t});let eV=[{name:"Rainbow",chains:[f.EIP155],logo:"https://images.web3auth.io/login-rainbow.svg",mobile:{native:"rainbow:",universal:"https://rnbwapp.com"},desktop:{native:"",universal:""}},{name:"MetaMask",chains:[f.EIP155],logo:"https://images.web3auth.io/login-metamask.svg",mobile:{native:"metamask:",universal:"https://metamask.app.link"},desktop:{native:"",universal:""}}];function eW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}class ez extends K{constructor(e){super(e),(0,n.Z)(this,"name",x.WALLET_CONNECT_V1),(0,n.Z)(this,"adapterNamespace",l.EIP155),(0,n.Z)(this,"currentChainNamespace",f.EIP155),(0,n.Z)(this,"type",T.EXTERNAL),(0,n.Z)(this,"adapterOptions",void 0),(0,n.Z)(this,"status",A.NOT_READY),(0,n.Z)(this,"adapterData",{uri:"",extensionAdapters:eV}),(0,n.Z)(this,"connector",null),(0,n.Z)(this,"wcProvider",null),(0,n.Z)(this,"rehydrated",!1),this.adapterOptions=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eW(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),this.chainConfig=e.chainConfig||null,this.sessionTime=e.sessionTime||86400}get connected(){var e;return!!(null!==(e=this.connector)&&void 0!==e&&e.connected)}get provider(){var e;return(null===(e=this.wcProvider)||void 0===e?void 0:e.provider)||null}set provider(e){throw Error("Not implemented")}async init(){super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=m(f.EIP155,1)),this.connector=this.getWalletConnectInstance(),this.wcProvider=new ep({config:{chainConfig:this.chainConfig},connector:this.connector}),this.emit(S.READY,x.WALLET_CONNECT_V1),this.status=A.READY,j.debug("initializing wallet connect v1 adapter"),this.connector.connected&&(this.rehydrated=!0,await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}))}async connect(){if(super.checkConnectionRequirements(),!this.connector)throw v.notReady("Wallet adapter is not ready yet");if(this.connected)return await this.onConnectHandler({accounts:this.connector.accounts,chainId:this.connector.chainId}),this.provider;if(this.status!==A.CONNECTING){var e,t;null!==(e=this.adapterOptions.adapterSettings)&&void 0!==e&&e.qrcodeModal&&(this.connector=this.getWalletConnectInstance(),this.wcProvider=new ep({config:{chainConfig:this.chainConfig,skipLookupNetwork:null===(t=this.adapterOptions.adapterSettings)||void 0===t?void 0:t.skipNetworkSwitching},connector:this.connector})),await this.createNewSession(),this.status=A.CONNECTING,this.emit(S.CONNECTING,{adapter:x.WALLET_CONNECT_V1})}return new Promise((e,t)=>{if(!this.connector)return t(v.notReady("Wallet adapter is not ready yet"));this.connector.on("modal_closed",async()=>(this.status=A.READY,this.emit(S.READY,x.WALLET_CONNECT_V1),t(Error("User closed modal"))));try{this.connector.on("connect",async(t,r)=>(t&&this.emit(S.ERRORED,t),j.debug("connected event emitted by web3auth"),await this.onConnectHandler(r.params[0]),e(this.provider)))}catch(r){j.error("Wallet connect v1 adapter error while connecting",r),this.status=A.READY,this.rehydrated=!0,this.emit(S.ERRORED,r),t(r instanceof y?r:w.connectionError(`Failed to login with wallet connect: ${(null==r?void 0:r.message)||""}`))}})}setAdapterSettings(e){this.status!==A.READY&&(null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId))}async getUserInfo(){if(!this.connected)throw w.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1},{cleanup:t}=e;if(!this.connector||!this.connected)throw w.notConnectedError("Not connected with wallet");await super.disconnect(),await this.connector.killSession(),this.rehydrated=!1,t?(this.connector=null,this.status=A.NOT_READY,this.wcProvider=null):this.status=A.READY,this.emit(S.DISCONNECTED)}async addChain(e){try{var t;if(!this.wcProvider)throw v.notReady("Wallet adapter is not ready yet");let r=null===(t=this.adapterOptions.adapterSettings)||void 0===t?void 0:t.networkSwitchModal;r&&await r.addNetwork({chainConfig:e,appOrigin:window.location.hostname}),await this.wcProvider.addChain(e)}catch(n){j.error(n)}}async switchChain(e,t){var r;if(!this.wcProvider)throw v.notReady("Wallet adapter is not ready yet");let n=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.networkSwitchModal;n&&await n.switchNetwork({currentChainConfig:t,newChainConfig:e,appOrigin:window.location.hostname}),await this.wcProvider.switchChain({chainId:t.chainId,lookup:!1,addChain:!1})}async createNewSession(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{forceNewSession:!1};if(!this.connector)throw v.notReady("Wallet adapter is not ready yet");if(n.forceNewSession&&this.connector.pending&&await this.connector.killSession(),null!==(e=this.adapterOptions)&&void 0!==e&&null!==(t=e.adapterSettings)&&void 0!==t&&t.qrcodeModal){await this.connector.createSession({chainId:parseInt((null===(r=this.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)});return}return new Promise((e,t)=>{var r;if(!this.connector)return t(v.notReady("Wallet adapter is not ready yet"));j.debug("creating new session for web3auth wallet connect"),this.connector.on("display_uri",async(r,n)=>{var i;if(r)return this.emit(S.ERRORED,w.connectionError("Failed to display wallet connect qr code")),t(r);let a=n.params[0];return this.updateAdapterData({uri:a,extensionAdapters:eV}),null===(i=this.connector)||void 0===i||i.off("display_uri"),e()}),this.connector.createSession({chainId:parseInt((null===(r=this.chainConfig)||void 0===r?void 0:r.chainId)||"0x1",16)}).catch(e=>(j.error("error while creating new wallet connect session",e),this.emit(S.ERRORED,e),t(e)))})}async onConnectHandler(e){if(!this.connector||!this.wcProvider)throw v.notReady("Wallet adapter is not ready yet");if(!this.chainConfig)throw v.invalidParams("Chain config is not set");let{chainId:t}=e;if(j.debug("connected chainId in hex"),t!==parseInt(this.chainConfig.chainId,16)){var r,n,i;let a=m(f.EIP155,t)||{chainId:`0x${t.toString(16)}`,displayName:"Unknown Network"},o=null===(r=this.adapterOptions.adapterSettings)||void 0===r?void 0:r.qrcodeModal;if(!o||o&&!(null!==(n=this.adapterOptions)&&void 0!==n&&null!==(i=n.adapterSettings)&&void 0!==i&&i.skipNetworkSwitching))try{await this.addChain(this.chainConfig),await this.switchChain(a,this.chainConfig),this.connector=this.getWalletConnectInstance()}catch(s){j.error("error while chain switching",s),await this.createNewSession({forceNewSession:!0}),this.emit(S.ERRORED,v.fromCode(5e3,`Not connected to correct network. Expected: ${this.chainConfig.displayName}, Current: ${(null==a?void 0:a.displayName)||t}, Please switch to correct network from wallet`)),this.status=A.READY,this.rehydrated=!0;return}}await this.wcProvider.setupProvider(this.connector),this.subscribeEvents(this.connector),this.status=A.CONNECTED,this.emit(S.CONNECTED,{adapter:x.WALLET_CONNECT_V1,reconnected:this.rehydrated})}subscribeEvents(e){e.on("session_update",async e=>{e&&this.emit(S.ERRORED,e)})}getWalletConnectInstance(){let e=this.adapterOptions.adapterSettings||{};return e.bridge=e.bridge||"https://bridge.walletconnect.org",new i.Z(e)}}},93326:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;var o=a(r(69282)),s=r(2970),c=r(95053),u=r(14543),d=r(39831),f=r(95642),l=r(98898),h=r(11091),p=r(58456),g=function(){function e(e,t,r,n){void 0===e&&(e=new s.BN(0)),void 0===t&&(t=new s.BN(0)),void 0===r&&(r=d.KECCAK256_RLP),void 0===n&&(n=d.KECCAK256_NULL),this.nonce=e,this.balance=t,this.stateRoot=r,this.codeHash=n,this._validate()}return e.fromAccountData=function(t){var r=t.nonce,n=t.balance,i=t.stateRoot,a=t.codeHash;return new e(r?new s.BN((0,f.toBuffer)(r)):void 0,n?new s.BN((0,f.toBuffer)(n)):void 0,i?(0,f.toBuffer)(i):void 0,a?(0,f.toBuffer)(a):void 0)},e.fromRlpSerializedAccount=function(e){var t=s.rlp.decode(e);if(!Array.isArray(t))throw Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)},e.fromValuesArray=function(t){var r=i(t,4),n=r[0],a=r[1],o=r[2],c=r[3];return new e(new s.BN(n),new s.BN(a),o,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,p.bnToUnpaddedBuffer)(this.nonce),(0,p.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash,]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(d.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(d.KECCAK256_NULL)},e}();t.Account=g;var m=function(e){try{(0,h.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.isValidAddress=m;var y=function(e,t){(0,h.assertIsHexString)(e);var r=(0,u.stripHexPrefix)(e).toLowerCase(),n="";t&&(n=(0,p.toType)(t,p.TypeOutput.BN).toString()+"0x");for(var i=(0,l.keccakFromString)(n+r).toString("hex"),a="0x",o=0;o<r.length;o++)parseInt(i[o],16)>=8?a+=r[o].toUpperCase():a+=r[o];return a};t.toChecksumAddress=y;var v=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.isValidChecksumAddress=v;var w=function(e,t){(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t);var r=new s.BN(t);return r.isZero()?(0,l.rlphash)([e,null]).slice(-20):(0,l.rlphash)([e,n.from(r.toArray())]).slice(-20)};t.generateAddress=w;var P=function(e,t,r){return(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t),(0,h.assertIsBuffer)(r),(0,o.default)(20===e.length),(0,o.default)(32===t.length),(0,l.keccak256)(n.concat([n.from("ff","hex"),e,t,(0,l.keccak256)(r)])).slice(-20)};t.generateAddress2=P;var E=function(e){return(0,c.privateKeyVerify)(e)};t.isValidPrivate=E;var b=function(e,t){return(void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),64===e.length)?(0,c.publicKeyVerify)(n.concat([n.from([4]),e])):!!t&&(0,c.publicKeyVerify)(e)};t.isValidPublic=b;var C=function(e,t){return void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),t&&64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),(0,o.default)(64===e.length),(0,l.keccak)(e).slice(-20)};t.pubToAddress=C,t.publicToAddress=t.pubToAddress;var O=function(e){return(0,h.assertIsBuffer)(e),n.from((0,c.publicKeyCreate)(e,!1)).slice(1)};t.privateToPublic=O;var x=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.privateToAddress=x;var N=function(e){return(0,h.assertIsBuffer)(e),64!==e.length&&(e=n.from((0,c.publicKeyConvert)(e,!1).slice(1))),e};t.importPublic=N;var _=function(){var e=(0,f.zeros)(20);return(0,f.bufferToHex)(e)};t.zeroAddress=_;var T=function(e){try{(0,h.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e};t.isZeroAddress=T},90897:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var a=i(r(69282)),o=r(2970),s=r(95642),c=r(93326),u=function(){function e(e){(0,a.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(t){return(0,a.default)((0,c.isValidAddress)(t),"Invalid address"),new e((0,s.toBuffer)(t))},e.fromPublicKey=function(t){(0,a.default)(n.isBuffer(t),"Public key should be Buffer");var r=(0,c.pubToAddress)(t);return new e(r)},e.fromPrivateKey=function(t){(0,a.default)(n.isBuffer(t),"Private key should be Buffer");var r=(0,c.privateToAddress)(t);return new e(r)},e.generate=function(t,r){return(0,a.default)(o.BN.isBN(r)),new e((0,c.generateAddress)(t.buf,r.toArrayLike(n)))},e.generate2=function(t,r,i){return(0,a.default)(n.isBuffer(r)),(0,a.default)(n.isBuffer(i)),new e((0,c.generateAddress2)(t.buf,r,i))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new o.BN(this.buf),t=new o.BN(0),r=new o.BN("ffff","hex");return e.gte(t)&&e.lte(r)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return n.from(this.buf)},e}();t.Address=u},95642:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(s){i={error:s}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;var o=r(2970),s=r(14543),c=r(11091),u=function(e){if(!Number.isSafeInteger(e)||e<0)throw Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToHex=u;var d=function(e){var r=(0,t.intToHex)(e);return n.from((0,s.padToEven)(r.slice(2)),"hex")};t.intToBuffer=d;var f=function(e){return n.allocUnsafe(e).fill(0)};t.zeros=f;var l=function(e,r,n){var i=(0,t.zeros)(r);return n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)},h=function(e,t){return(0,c.assertIsBuffer)(e),l(e,t,!1)};t.setLengthLeft=h;var p=function(e,t){return(0,c.assertIsBuffer)(e),l(e,t,!0)};t.setLengthRight=p;var g=function(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},m=function(e){return(0,c.assertIsBuffer)(e),g(e)};t.unpadBuffer=m;var y=function(e){return(0,c.assertIsArray)(e),g(e)};t.unpadArray=y;var v=function(e){return(0,c.assertIsHexString)(e),g(e=(0,s.stripHexPrefix)(e))};t.unpadHexString=v;var w=function(e){if(null==e)return n.allocUnsafe(0);if(n.isBuffer(e)||Array.isArray(e)||e instanceof Uint8Array)return n.from(e);if("string"==typeof e){if(!(0,s.isHexString)(e))throw Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return n.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,t.intToBuffer)(e);if(o.BN.isBN(e)){if(e.isNeg())throw Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(n)}if(e.toArray)return n.from(e.toArray());if(e.toBuffer)return n.from(e.toBuffer());throw Error("invalid type")};t.toBuffer=w;var P=function(e){return new o.BN((0,t.toBuffer)(e)).toNumber()};t.bufferToInt=P;var E=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")};t.bufferToHex=E;var b=function(e){return new o.BN(e).fromTwos(256)};t.fromSigned=b;var C=function(e){return n.from(e.toTwos(256).toArray())};t.toUnsigned=C;var O=function(e){return"string"!=typeof e?e:(0,s.isHexPrefixed)(e)?e:"0x"+e};t.addHexPrefix=O;var x=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!=0)throw Error("Invalid non-even hex string input for toUtf8() provided");return n.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.toUtf8=x;var N=function(e){if(n.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var r=[],i=0;i<e.length;i++)r.push((0,t.baToJSON)(e[i]));return r}};t.baToJSON=N;var _=function(e){var t,r;try{for(var n=i(Object.entries(e)),o=n.next();!o.done;o=n.next()){var s=a(o.value,2),c=s[0],u=s[1];if(void 0!==u&&u.length>0&&0===u[0])throw Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}};t.validateNoLeadingZeroes=_,t.arrToBufArr=function e(t){return Array.isArray(t)?t.map(function(t){return e(t)}):n.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map(function(t){return e(t)}):Uint8Array.from(null!=t?t:[])}},39831:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=t.MAX_UINT64=void 0;var n=r(48764),i=r(2970);t.MAX_UINT64=new i.BN("ffffffffffffffff",16),t.MAX_INTEGER=new i.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new i.BN("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex")},2970:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rlp=t.BN=void 0;var s=o(r(13550));t.BN=s.default;var c=a(r(51675));t.rlp=c},98898:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160FromArray=t.ripemd160FromString=t.ripemd160=t.sha256FromArray=t.sha256FromString=t.sha256=t.keccakFromArray=t.keccakFromHexString=t.keccakFromString=t.keccak256=t.keccak=void 0;var i=r(82192),a=r(23482),o=r(2970),s=r(95642),c=r(11091),u=function(e,t){switch(void 0===t&&(t=256),(0,c.assertIsBuffer)(e),t){case 224:return(0,i.keccak224)(e);case 256:return(0,i.keccak256)(e);case 384:return(0,i.keccak384)(e);case 512:return(0,i.keccak512)(e);default:throw Error("Invald algorithm: keccak".concat(t))}};t.keccak=u;var d=function(e){return(0,t.keccak)(e)};t.keccak256=d;var f=function(e,r){void 0===r&&(r=256),(0,c.assertIsString)(e);var i=n.from(e,"utf8");return(0,t.keccak)(i,r)};t.keccakFromString=f;var l=function(e,r){return void 0===r&&(r=256),(0,c.assertIsHexString)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromHexString=l;var h=function(e,r){return void 0===r&&(r=256),(0,c.assertIsArray)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromArray=h;var p=function(e){return e=(0,s.toBuffer)(e),a("sha256").update(e).digest()},g=function(e){return(0,c.assertIsBuffer)(e),p(e)};t.sha256=g;var m=function(e){return(0,c.assertIsString)(e),p(e)};t.sha256FromString=m;var y=function(e){return(0,c.assertIsArray)(e),p(e)};t.sha256FromArray=y;var v=function(e,t){e=(0,s.toBuffer)(e);var r=a("rmd160").update(e).digest();return!0===t?(0,s.setLengthLeft)(r,32):r},w=function(e,t){return(0,c.assertIsBuffer)(e),v(e,t)};t.ripemd160=w;var P=function(e,t){return(0,c.assertIsString)(e),v(e,t)};t.ripemd160FromString=P;var E=function(e,t){return(0,c.assertIsArray)(e),v(e,t)};t.ripemd160FromArray=E;var b=function(e){return(0,t.keccak)(o.rlp.encode(e))};t.rlphash=b},11091:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;var i=r(14543),a=function(e){if(!(0,i.isHexString)(e))throw Error("This method only supports 0x-prefixed hex strings but input was: ".concat(e))};t.assertIsHexString=a;var o=function(e){if(!n.isBuffer(e))throw Error("This method only supports Buffer but input was: ".concat(e))};t.assertIsBuffer=o;var s=function(e){if(!Array.isArray(e))throw Error("This method only supports number arrays but input was: ".concat(e))};t.assertIsArray=s;var c=function(e){if("string"!=typeof e)throw Error("This method only supports strings but input was: ".concat(e))};t.assertIsString=c},62671:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,i(r(39831),t),i(r(93326),t),i(r(90897),t),i(r(98898),t),i(r(44877),t),i(r(95642),t),i(r(5780),t),i(r(2970),t),i(r(58456),t);var a=r(14543);Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return a.isHexPrefixed}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return a.stripHexPrefix}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return a.padToEven}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return a.getBinarySize}}),Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return a.arrayContainsArray}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return a.toAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return a.fromUtf8}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return a.fromAscii}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return a.getKeys}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return a.isHexString}})},14543:function(e,t,r){var n=r(48764).Buffer;function i(e){if("string"!=typeof e)throw Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=i;var a=function(e){if("string"!=typeof e)throw Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return i(e)?e.slice(2):e};function o(e){var t=e;if("string"!=typeof t)throw Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=a,t.padToEven=o,t.getBinarySize=function(e){if("string"!=typeof e)throw Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return n.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[r?"some":"every"](function(t){return e.indexOf(t)>=0})},t.toAscii=function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.fromUtf8=function(e){var t=n.from(e,"utf8");return"0x".concat(o(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!=typeof t)throw Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],i=0;i<e.length;i++){var a=e[i][t];if(r&&!a)a="";else if("string"!=typeof a)throw Error("invalid abi - expected type 'string', received ".concat(typeof a));n.push(a)}return n},t.isHexString=function(e,t){return"string"==typeof e&&!!e.match(/^0x[0-9A-Fa-f]*$/)&&(!t||e.length===2+2*t)}},5780:function(e,t,r){var n=r(48764).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var a=i(r(69282)),o=r(14543),s=r(2970),c=r(95642),u=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach(function(t){r[t]="0x".concat(e[t].toString("hex"))}),r}return(0,c.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},t.forEach(function(t,r){function i(){return e.raw[r]}function o(i){"00"!==(i=(0,c.toBuffer)(i)).toString("hex")||t.allowZero||(i=n.allocUnsafe(0)),t.allowLess&&t.length?(i=(0,c.unpadBuffer)(i),(0,a.default)(t.length>=i.length,"The field ".concat(t.name," must not have more ").concat(t.length," bytes"))):!(t.allowZero&&0===i.length)&&t.length&&(0,a.default)(t.length===i.length,"The field ".concat(t.name," must have byte length of ").concat(t.length)),e.raw[r]=i}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:i,set:o}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:o,get:i})}),r){if("string"==typeof r&&(r=n.from((0,o.stripHexPrefix)(r),"hex")),n.isBuffer(r)&&(r=s.rlp.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw Error("wrong number of fields in data");r.forEach(function(t,r){e[e._fields[r]]=(0,c.toBuffer)(t)})}else if("object"==typeof r){var i=Object.keys(r);t.forEach(function(t){-1!==i.indexOf(t.name)&&(e[t.name]=r[t.name]),-1!==i.indexOf(t.alias)&&(e[t.alias]=r[t.alias])})}else throw Error("invalid data")}};t.defineProperties=u},44877:function(e,t,r){var n=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var i=r(95053),a=r(2970),o=r(95642),s=r(98898),c=r(11091),u=r(58456);function d(e,t){var r=(0,u.toType)(e,u.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,u.toType)(e,u.TypeOutput.BN);if(!t)return r.subn(27);var n=(0,u.toType)(t,u.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function f(e){var t=new a.BN(e);return t.eqn(0)||t.eqn(1)}t.ecsign=function(e,t,r){var a=(0,i.ecdsaSign)(e,t),o=a.signature,s=a.recid,c=n.from(o.slice(0,32)),d=n.from(o.slice(32,64));if(!r||"number"==typeof r){if(r&&!Number.isSafeInteger(r))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:c,s:d,v:r?s+(2*r+35):s+27}}return{r:c,s:d,v:(0,u.toType)(r,u.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(n)}};var l=function(e,t,r,a,s){var c=n.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(a,32)],64),u=d(t,s);if(!f(u))throw Error("Invalid signature v value");var l=(0,i.ecdsaRecover)(c,u.toNumber(),e);return n.from((0,i.publicKeyConvert)(l,!1).slice(1))};t.ecrecover=l;var h=function(e,t,r,i){var a=d(e,i);if(!f(a))throw Error("Invalid signature v value");return(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(r,32),(0,o.toBuffer)(e)]))};t.toRpcSig=h;var p=function(e,t,r,i){var a=d(e,i);if(!f(a))throw Error("Invalid signature v value");var s=(0,u.toType)(e,u.TypeOutput.Number),c=r;return(s>28&&s%2==1||1===s||28===s)&&(c=n.from(r),c[0]|=128),(0,o.bufferToHex)(n.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(c,32)]))};t.toCompactSig=p;var g=function(e){var t,r,n,i=(0,o.toBuffer)(e);if(i.length>=65)t=i.slice(0,32),r=i.slice(32,64),n=(0,o.bufferToInt)(i.slice(64));else if(64===i.length)t=i.slice(0,32),r=i.slice(32,64),n=(0,o.bufferToInt)(i.slice(32,33))>>7,r[0]&=127;else throw Error("Invalid signature length");return n<27&&(n+=27),{v:n,r:t,s:r}};t.fromRpcSig=g;var m=function(e,t,r,n,i){void 0===n&&(n=!0);var o=new a.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),s=new a.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length||!f(d(e,i)))return!1;var c=new a.BN(t),u=new a.BN(r);return!(c.isZero()||c.gt(s)||u.isZero()||u.gt(s))&&(!n||1!==u.cmp(o))};t.isValidSignature=m;var y=function(e){(0,c.assertIsBuffer)(e);var t=n.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(n.concat([t,e]))};t.hashPersonalMessage=y},58456:function(e,t,r){var n,i,a=r(48764).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=t.bnToRlp=t.bnToUnpaddedBuffer=t.bnToHex=void 0;var o=r(2970),s=r(14543),c=r(95642);function u(e){return(0,c.unpadBuffer)(e.toArrayLike(a))}function d(e){return u(e)}t.bnToHex=function(e){return"0x".concat(e.toString(16))},t.bnToUnpaddedBuffer=u,t.bnToRlp=d,(n=i=t.TypeOutput||(t.TypeOutput={}))[n.Number=0]="Number",n[n.BN=1]="BN",n[n.Buffer=2]="Buffer",n[n.PrefixedHexString=3]="PrefixedHexString",t.toType=function(e,t){if(null===e)return null;if(void 0!==e){if("string"!=typeof e||(0,s.isHexString)(e)){if("number"==typeof e&&!Number.isSafeInteger(e))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)")}else throw Error("A string must be provided with a 0x-prefix, given: ".concat(e));var r=(0,c.toBuffer)(e);if(t===i.Buffer)return r;if(t===i.BN)return new o.BN(r);if(t!==i.Number)return"0x".concat(r.toString("hex"));var n=new o.BN(r),a=new o.BN(Number.MAX_SAFE_INTEGER.toString());if(n.gt(a))throw Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return n.toNumber()}}}}]);
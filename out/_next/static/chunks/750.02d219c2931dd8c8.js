(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{27750:function(e,t,r){"use strict";r.r(t),r.d(t,{PhantomAdapter:function(){return ey}});var n=r(4942),i=r(95844),o=r(13631),a=r(20917),s=r(96245),c=r(2043),l=r.n(c);let h={EIP155:"eip155",SOLANA:"solana",OTHER:"other"},d={EIP155:"eip155",SOLANA:"solana",MULTICHAIN:"multichain"},p=e=>{if(e===h.EIP155||e===h.SOLANA)return 1;throw Error(`Chain namespace ${e} is not supported`)},u=e=>{let t=h.EIP155;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:t,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:t,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:t,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:t,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:t,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:t,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:t,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:t,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:t,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null},g=e=>{let t=h.SOLANA;return 1===e?{chainNamespace:t,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:t,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:t,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null},m=(e,t)=>{if(e===h.OTHER)return null;let r=t?"number"==typeof t?t:parseInt(t,16):p(e);return e===h.EIP155?u(r):e===h.SOLANA?g(r):null};class f extends o.s{constructor(e,t){super(t),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"message",void 0),this.code=e,this.message=t||"",Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class y extends f{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new y(e,`${y.messages[e]}, ${t}`)}static notFound(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5001,e)}static notInstalled(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5002,e)}static notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5003,e)}static windowBlocked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5004,e)}static windowClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5005,e)}static incompatibleChainNameSpace(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5006,e)}static duplicateAdapterError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5007,e)}static invalidProviderConfigError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5008,e)}static providerNotReadyError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5009,e)}static rpcConnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5010,e)}static invalidParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5011,e)}static invalidNetwork(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return y.fromCode(5013,e)}}(0,n.Z)(y,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class v extends f{constructor(e,t){super(e,t),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new v(e,`${v.messages[e]}${t}`)}static connectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5111,e)}static disconnectionError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5112,e)}static notConnectedError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5113,e)}static popupClosed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return v.fromCode(5114,e)}}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,n.Z)(v,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});let P={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},O=E({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},P),C=E({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},P),b=E(E({},C),O);function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let T={EXTERNAL:"external",IN_APP:"in_app"},k={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},_=A(A({},k),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"});class I extends i.Ue{constructor(){super(...arguments),(0,n.Z)(this,"adapterData",{}),(0,n.Z)(this,"sessionTime",86400),(0,n.Z)(this,"chainConfig",null)}get chainConfigProxy(){return this.chainConfig?A({},this.chainConfig):null}setChainConfig(e){if(this.status===k.READY)return;if(!e.chainNamespace)throw y.notReady("ChainNamespace is required while setting chainConfig");let t=m(e.chainNamespace,e.chainId);this.chainConfig=A(A({},t),e)}setAdapterSettings(e){}checkConnectionRequirements(){if(this.name!==b.WALLET_CONNECT_V1||this.status!==k.CONNECTING){if(this.status===k.CONNECTING)throw y.notReady("Already connecting");if(this.status===k.CONNECTED)throw v.connectionError("Already connected");if(this.status!==k.READY)throw v.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw v.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}checkInitializationRequirements(){if(this.status!==k.NOT_READY){if(this.status===k.CONNECTED)throw y.notReady("Already connected");if(this.status===k.READY)throw y.notReady("Adapter is already initialized")}}updateAdapterData(e){this.adapterData=e,this.emit(_.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}let x="https://authjs.web3auth.io";var S=l().getLogger("web3auth-logger");function D(e){let t=!1,r=0,n;try{n=window[e],t=!0,r=n.length;let i="__storage_test__";return n.setItem(i,i),n.removeItem(i),!0}catch(o){return!!(o&&(22===o.code||1014===o.code||"QuotaExceededError"===o.name||"NS_ERROR_DOM_QUOTA_REACHED"===o.name)&&t&&0!==r)}}let j=e=>{let t=(0,s.Z)(e);return!!(!t.exp||t.exp<Math.floor(Date.now()/1e3))},R=async(e,t)=>{let r=await (0,a.v_)(`${x}/siww/get`,{payload:e,header:{t:"solana"===t?"sip99":"eip191"},network:"solana"===t?"solana":"ethereum"});if(!r.success)throw Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return r.challenge},M=async(e,t,r,n,i,o)=>{let s={signature:{s:t,t:"solana"===e?"sip99":"eip191"},message:r,issuer:n,audience:window.location.hostname,timeout:i},c=await (0,a.v_)(`${x}/siww/verify`,s,{headers:{client_id:o,wallet_provider:n}});if(!c.success)throw S.error("Failed to authenticate user, ,message verification failed",c.error),Error("Failed to authenticate user, ,message verification failed");return c.token},L=(e,t)=>D("localStorage")?localStorage.getItem(`${e.toLowerCase()}_${t}`):null,K=(e,t,r)=>D("localStorage")?localStorage.setItem(`${e.toLowerCase()}_${t}`,r):null,Z=(e,t)=>D("localStorage")?localStorage.removeItem(`${e.toLowerCase()}_${t}`):null;var q=r(9193),U=r.n(q);class W extends I{constructor(e){super(),(0,n.Z)(this,"clientId",void 0),this.clientId=e.clientId}async authenticateUser(){var e;if(!this.provider||!(null!==(e=this.chainConfig)&&void 0!==e&&e.chainId))throw v.notConnectedError();let{chainNamespace:t,chainId:r}=this.chainConfig;if(this.status!==k.CONNECTED)throw v.notConnectedError("Not connected with wallet, Please login/connect first");let n=await this.provider.request({method:"getAccounts"});if(n&&n.length>0){let i=L(n[0],this.name);if(i){let o=j(i);if(!o)return{idToken:i}}let a={domain:window.location.origin,uri:window.location.href,address:n[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},s=await R(a,t),c=new TextEncoder().encode(s),l=await this.provider.request({method:"signMessage",params:{message:c,display:"utf8"}}),h=await M(t,U().encode(l),s,this.name,this.sessionTime,this.clientId);return K(n[0],this.name,h),{idToken:h}}throw v.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==k.CONNECTED)throw v.disconnectionError("Not connected with wallet");let e=await this.provider.request({method:"getAccounts"});e&&e.length>0&&Z(e[0],this.name)}}var Y=r(22782),B=r(79826),H=r(23420),$=r.n(H);function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class G extends Y.xG{constructor(e){let{config:t,state:r}=e;if(super({config:t,state:r}),(0,n.Z)(this,"_providerEngineProxy",null),!t.chainConfig)throw y.invalidProviderConfigError("Please provide chainConfig");if(!t.chainConfig.chainId)throw y.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!t.chainConfig.rpcTarget)throw y.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");this.defaultState={chainId:"loading"},this.defaultConfig={chainConfig:t.chainConfig,networks:{[t.chainConfig.chainId]:t.chainConfig}},super.initialize()}get provider(){return this._providerEngineProxy}set provider(e){throw Error("Method not implemented.")}addChain(e){if(!e.chainId||!e.rpcTarget)throw B.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:F(F({},this.config.networks),{},{[e.chainId]:e})})}getChainConfig(e){var t;let r=null===(t=this.config.networks)||void 0===t?void 0:t[e];if(!r)throw B.ethErrors.rpc.invalidRequest(`Chain ${e} is not supported, please add chainConfig for it`);return r}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,Y.qY)(e)}}class X{constructor(){(0,n.Z)(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw Error("Method not implemented.")}addChain(e){throw Error("Method not implemented.")}async setupProvider(e){let t=this.getPrivKeyMiddleware(e),r=new i.eI;r.push(t);let n=(0,Y.Xj)(r);this.updateProviderEngineProxy(n)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}updateProviderEngineProxy(e){this._providerEngineProxy?this._providerEngineProxy.setTarget(e):this._providerEngineProxy=(0,Y.qY)(e)}getPrivKeyMiddleware(e){return this.createPrivKeyMiddleware({getPrivatekey:async()=>e})}createPrivKeyMiddleware(e){let{getPrivatekey:t}=e;async function r(e,r){r.result=await t()}return(0,i.v0)({private_key:(0,i.Pk)(r)})}}(0,n.Z)(X,"getProviderInstance",async e=>{let t=new X;return await t.setupProvider(e.privKey),t}),$()();var V=r(77191),J=r.n(V),Q=r(59917),ee=r(50108),et=r.n(ee),er=r(48764).Buffer;function en(e){var t,r;let{chainId:n}=e;return(0,i.UZ)([(e,t,r,i)=>"solana_chainId"===e.method?(t.result=n,i()):r(),(t,r,n,i)=>"solana_provider_config"===t.method?(r.result=e,i()):n()])}function ei(e,t){return(0,i.Pk)(async(r,n,i)=>{let{method:o}=r;if(o!==e)return i();if(!t)throw Error(`WalletMiddleware - ${e} not provided`);let a=await t(r);n.result=a})}function eo(e){let{getAccounts:t,requestAccounts:r,signTransaction:n,signAndSendTransaction:o,signAllTransactions:a,signMessage:s,getPrivateKey:c,getSecretKey:l}=e;return(0,i.UZ)([function(e){let{requestAccounts:t}=e;return(0,i.Pk)(async(e,r,n)=>{let{method:i}=e;if("requestAccounts"!==i)return n();if(!t)throw Error("WalletMiddleware - opts.requestAccounts not provided");let o=await t(e);r.result=o})}({requestAccounts:r}),function(e){let{getAccounts:t}=e;return(0,i.Pk)(async(e,r,n)=>{let{method:i}=e;if("getAccounts"!==i)return n();if(!t)throw Error("WalletMiddleware - opts.getAccounts not provided");let o=await t(e);r.result=o})}({getAccounts:t}),ei("signTransaction",n),ei("signAndSendTransaction",o),ei("signAllTransactions",a),ei("signMessage",s),ei("solanaPrivateKey",c),ei("solanaSecretKey",l)])}function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function es(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ea(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class ec extends G{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:es(es({},t.chainConfig),{},{chainNamespace:h.SOLANA})},state:r})}async switchChain(e){return Promise.resolve()}async setupProvider(e){let t=new i.eI,r=this.getProviderHandlers(e),n=eo(r);t.push(n);let o=en(this.config.chainConfig);t.push(o);let a=this.getInjectedProviderProxy(e);a&&t.push(a);let s=(0,Y.Xj)(t);this.updateProviderEngineProxy(s),await this.lookupNetwork()}async lookupNetwork(){let{chainConfig:e}=this.config;return this.update({chainId:e.chainId}),e.chainId||""}getInjectedProviderProxy(e){}}let el=e=>({requestAccounts:async()=>e.publicKey?[J().encode(e.publicKey.toBytes())]:[],getAccounts:async()=>e.publicKey?[J().encode(e.publicKey.toBytes())]:[],async getPrivateKey(){throw B.ethErrors.rpc.methodNotSupported()},async getSecretKey(){throw B.ethErrors.rpc.methodNotSupported()},async signTransaction(t){let r=await e.signTransaction(t.params.message);return r},async signMessage(t){let r=await e.signMessage(t.params.message,t.params.display);return r.signature},async signAllTransactions(t){var r,n;if(!(null!==(r=t.params)&&void 0!==r&&r.message)||!(null!==(n=t.params)&&void 0!==n&&n.message.length))throw B.ethErrors.rpc.invalidParams("message");let i=await e.signAllTransactions(t.params.message);return i},async signAndSendTransaction(t){let r=await e.signAndSendTransaction(t.params.message);return{signature:r.signature}}});function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}class ed extends ec{getProviderHandlers(e){return el(e)}getInjectedProviderProxy(e){var t;return(0,i.Pk)(async(t,r,i)=>{let o=await e.request(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t));r.result=o})}}async function ep(e){let{privKey:t,getProviderEngineProxy:r}=e;if("string"!=typeof t)throw y.invalidParams("privKey must be a string");let n=Q.RG.fromSecretKey(er.from(t,"hex"));return{requestAccounts:async()=>[n.publicKey.toBase58()],getAccounts:async()=>[n.publicKey.toBase58()],getPrivateKey:async()=>t,getSecretKey:async()=>J().encode(n.secretKey),async signTransaction(e){var t;if(!(null!==(t=e.params)&&void 0!==t&&t.message))throw B.ethErrors.rpc.invalidParams("message");let r=e.params.message;return r.partialSign(n),r},async signMessage(e){var t;if(!(null!==(t=e.params)&&void 0!==t&&t.message))throw B.ethErrors.rpc.invalidParams("message");let r=et().sign.detached(e.params.message,n.secretKey);return r},async signAndSendTransaction(e){var t;if(!(null!==(t=e.params)&&void 0!==t&&t.message))throw B.ethErrors.rpc.invalidParams("message");let i=r();if(!i)throw B.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let o=e.params.message;o.sign(n);let a=await i.request({method:"sendTransaction",params:[J().encode(o.serialize())]});return{signature:a}},async signAllTransactions(e){var t,r,i;if(!(null!==(t=e.params)&&void 0!==t&&t.message)||!(null!==(r=e.params)&&void 0!==r&&r.message.length))throw B.ethErrors.rpc.invalidParams("message");let o=null===(i=e.params)||void 0===i?void 0:i.message;for(let a of o||[]){let s=a;s.partialSign(n)}return o}}}function eu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}class em extends G{constructor(e){let{config:t,state:r}=e;super({config:{chainConfig:eg(eg({},t.chainConfig),{},{chainNamespace:h.SOLANA})},state:r})}async enable(){if(!this.state.privateKey)throw B.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});return await this.setupProvider(this.state.privateKey),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){let t=await ep({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)}),r=eo(t),n=new i.eI,{networkMiddleware:o}=function(e){let{rpcTarget:t}=e,r=(0,Y.v$)({rpcTarget:t}),n=(0,i.UZ)([en(e),r]);return{networkMiddleware:n,fetchMiddleware:r}}(this.config.chainConfig);n.push(this.getChainSwitchMiddleware()),n.push(this.getAccountMiddleware()),n.push(r),n.push(o);let a=(0,Y.Xj)(n);this.updateProviderEngineProxy(a),await this.lookupNetwork()}async updateAccount(e){if(!this._providerEngineProxy)throw B.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let t=await this._providerEngineProxy.request({method:"solanaPrivateKey"});t!==e.privateKey&&(await this.setupProvider(e.privateKey),this._providerEngineProxy.emit("accountsChanged",{accounts:await this._providerEngineProxy.request({method:"requestAccounts"})}))}async switchChain(e){if(!this._providerEngineProxy)throw B.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let t=this.getChainConfig(e.chainId);this.update({chainId:"loading"}),this.configure({chainConfig:t});let r=await this._providerEngineProxy.request({method:"solanaPrivateKey"});await this.setupProvider(r)}async lookupNetwork(){if(!this._providerEngineProxy)throw B.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});let e=await this._providerEngineProxy.request({method:"getHealth",params:[]}),{chainConfig:t}=this.config;if("ok"!==e)throw y.rpcConnectionError(`Failed to lookup network for following rpc target: ${t.rpcTarget}`);return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),this.state.chainId}getChainSwitchMiddleware(){let e=function(e){let{addNewChainConfig:t,switchSolanaChain:r}=e;return(0,i.UZ)([ei("addSolanaChain",t),ei("switchSolanaChain",r)])}({addNewChainConfig:async e=>{if(!e.params)throw B.ethErrors.rpc.invalidParams("Missing request params");let{chainId:t,chainName:r,rpcUrls:n,blockExplorerUrls:i,nativeCurrency:o}=e.params;if(!t)throw B.ethErrors.rpc.invalidParams("Missing chainId in chainParams");if(!n||0===n.length)throw B.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");if(!o)throw B.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");this.addChain({chainNamespace:h.SOLANA,chainId:t,ticker:(null==o?void 0:o.symbol)||"SOL",tickerName:(null==o?void 0:o.name)||"Solana",displayName:r,rpcTarget:n[0],blockExplorer:(null==i?void 0:i[0])||""})},switchSolanaChain:async e=>{if(!e.params)throw B.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.chainId)throw B.ethErrors.rpc.invalidParams("Missing chainId");await this.switchChain(e.params)}});return e}getAccountMiddleware(){return function(e){let{updatePrivatekey:t}=e;return(0,i.UZ)([ei("updateAccount",t)])}({updatePrivatekey:async e=>{if(!e.params)throw B.ethErrors.rpc.invalidParams("Missing request params");if(!e.params.privateKey)throw B.ethErrors.rpc.invalidParams("Missing privateKey");let{privateKey:t}=e.params;await this.updateAccount({privateKey:t})}})}}(0,n.Z)(em,"getProviderInstance",async e=>{let t=new em({config:{chainConfig:e.chainConfig}});return await t.setupProvider(e.privKey),t});let ef=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3},r="undefined"!=typeof window&&!!(null!==(e=window.solana)&&void 0!==e&&e.isPhantom);if(r)return window.solana;let n=await function e(t,r,n){return new Promise((i,o)=>{n>0?setTimeout(async()=>{let a=await t();a&&i(a),a||e(t,r,n-1).then(e=>(i(e),e)).catch(e=>o(e))},r):i(!1)})}(()=>{var e;return null===(e=window.solana)||void 0===e?void 0:e.isPhantom},t.interval,t.count);return n?window.solana:null};class ey extends W{constructor(e){super(e),(0,n.Z)(this,"name",b.PHANTOM),(0,n.Z)(this,"adapterNamespace",d.SOLANA),(0,n.Z)(this,"currentChainNamespace",h.SOLANA),(0,n.Z)(this,"type",T.EXTERNAL),(0,n.Z)(this,"status",k.NOT_READY),(0,n.Z)(this,"_wallet",null),(0,n.Z)(this,"phantomProvider",null),(0,n.Z)(this,"rehydrated",!1),(0,n.Z)(this,"_onDisconnect",()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===k.CONNECTED?k.READY:k.NOT_READY,this.emit(_.DISCONNECTED))}),this.chainConfig=(null==e?void 0:e.chainConfig)||null,this.sessionTime=(null==e?void 0:e.sessionTime)||86400}get isWalletConnected(){var e;return!!(null!==(e=this._wallet)&&void 0!==e&&e.isConnected&&this.status===k.CONNECTED)}get provider(){var e;return(null===(e=this.phantomProvider)||void 0===e?void 0:e.provider)||null}set provider(e){throw Error("Not implemented")}setAdapterSettings(e){this.status!==k.READY&&(null!=e&&e.sessionTime&&(this.sessionTime=e.sessionTime),null!=e&&e.clientId&&(this.clientId=e.clientId))}async init(e){if(super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=m(h.SOLANA,"0x1")),this._wallet=await ef({interval:500,count:3}),!this._wallet)throw y.notInstalled();this.phantomProvider=new ed({config:{chainConfig:this.chainConfig}}),this.status=k.READY,this.emit(_.READY,b.PHANTOM);try{S.debug("initializing phantom adapter"),e.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(t){S.error("Failed to connect with cached phantom provider",t),this.emit("ERRORED",t)}}async connect(){var e=this;try{if(super.checkConnectionRequirements(),this.status=k.CONNECTING,this.emit(_.CONNECTING,{adapter:b.PHANTOM}),!this._wallet)throw y.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{let t=this._wallet._handleDisconnect;try{await new Promise((r,n)=>{let i=async()=>{await this.connectWithProvider(this._wallet),r(this.provider)};if(!this._wallet)return n(y.notInstalled());this._wallet.once("connect",i),this._wallet._handleDisconnect=function(){n(y.windowClosed());for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(e._wallet,i)},this._wallet.connect().catch(e=>{n(e)})})}catch(r){if(r instanceof f)throw r;throw v.connectionError(null==r?void 0:r.message)}finally{this._wallet._handleDisconnect=t}}if(!this._wallet.publicKey)throw v.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(n){throw this.status=k.READY,this.rehydrated=!1,this.emit(_.ERRORED,n),n}}async disconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};await super.disconnect();try{var t;await (null===(t=this._wallet)||void 0===t?void 0:t.disconnect()),e.cleanup&&(this.status=k.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(_.DISCONNECTED)}catch(r){this.emit(_.ERRORED,v.disconnectionError(null==r?void 0:r.message))}}async getUserInfo(){if(!this.isWalletConnected)throw v.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(e){if(!this.phantomProvider)throw v.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(e),this.status=k.CONNECTED,this.emit(_.CONNECTED,{adapter:b.PHANTOM,reconnected:this.rehydrated}),this.provider}}},9193:function(e,t,r){let n=r(74341);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},74341:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw TypeError(i+" is ambiguous");t[o]=n}var a=e.length,s=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===s;)n++,r++;for(var o=(e.length-r)*c+1>>>0,l=new Uint8Array(o);e[r];){var h=t[e.charCodeAt(r)];if(255===h)return;for(var d=0,p=o-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=a*l[p]>>>0,l[p]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");i=d,r++}for(var u=o-i;u!==o&&0===l[u];)u++;for(var g=new Uint8Array(n+(o-u)),m=n;u!==o;)g[m++]=l[u++];return g}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var c=(o-i)*l+1>>>0,h=new Uint8Array(c);i!==o;){for(var d=t[i],p=0,u=c-1;(0!==d||p<n)&&-1!==u;u--,p++)d+=256*h[u]>>>0,h[u]=d%a>>>0,d=d/a>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var g=c-n;g!==c&&0===h[g];)g++;for(var m=s.repeat(r);g<c;++g)m+=e.charAt(h[g]);return m},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw Error("Non-base"+a+" character")}}}}}]);